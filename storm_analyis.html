<h1 id="noaa-severe-weather-analysis">NOAA Severe Weather Analysis</h1>
<h2 id="synopsis">Synopsis</h2>
<p>The following is an analysis of weather data from National Weather Service. It attempts to answer two questions, one, which types of events are most harmful with respect to population health, and two, which events have the greatest economic consequences.</p>
<h2 id="data-processing">Data Processing</h2>
<p>Setup:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)</code></pre>
<p>Loading the data:</p>
<pre class="sourceCode r"><code class="sourceCode r">weatherData &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;repdata-data-StormData.csv.bz2&#39;</span>)</code></pre>
<h3 id="question-1-impact-on-human-population.">Question 1: Impact on human population.</h3>
<p>First we take the subset of <code>FATALITIES</code> and <code>INJURIES</code> from the data and create a new column <code>combinedDeathsAndInjuries</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r">populationImpact &lt;-<span class="st"> </span><span class="kw">select</span>(weatherData, FATALITIES, INJURIES)
populationImpact$combinedDeathsAndInjuries &lt;-<span class="st"> </span>populationImpact$FATALITIES +<span class="st"> </span>populationImpact$INJURIES</code></pre>
<p>Now we can aggregate the by event type:</p>
<pre class="sourceCode r"><code class="sourceCode r">deathsAndInjuries &lt;-<span class="st"> </span><span class="kw">aggregate</span>(populationImpact, <span class="dt">by=</span><span class="kw">list</span>(<span class="dt">eventType =</span> weatherData$EVTYPE), sum, <span class="dt">na.rm =</span> T)
deathsAndInjuries &lt;-<span class="st"> </span><span class="kw">arrange</span>(deathsAndInjuries, <span class="kw">desc</span>(combinedDeathsAndInjuries))
<span class="kw">head</span>(deathsAndInjuries)</code></pre>
<pre><code>##        eventType FATALITIES INJURIES combinedDeathsAndInjuries
## 1        TORNADO       5633    91346                     96979
## 2 EXCESSIVE HEAT       1903     6525                      8428
## 3      TSTM WIND        504     6957                      7461
## 4          FLOOD        470     6789                      7259
## 5      LIGHTNING        816     5230                      6046
## 6           HEAT        937     2100                      3037</code></pre>
<p>By combining the injuries with the fatalities of the data, we see that tornadoes are clearly the most harmful to weather events in the data set.</p>
<h3 id="question-2-economic-consequences">Question 2: Economic Consequences</h3>
<p>First we collect the subsets of columns related to the economic impact of events, namely crop and property damage.</p>
<pre class="sourceCode r"><code class="sourceCode r">propertyData &lt;-<span class="st"> </span><span class="kw">select</span>(weatherData, EVTYPE, PROPDMG, PROPDMGEXP, CROPDMG, CROPDMGEXP)</code></pre>
<p>While the impact on the human population from Question 1 certainly also has economic consequences, they will not be taken into consideration here because no financial information in these respects was included in the dataset, making any attempt to include the &quot;human&quot; element of the economic consequences purlely speculative.</p>
<p>Dealing with factor levels in <code>propertyData$CROPDMGEXP</code> and <code>propertyData$CROPDMGEXP</code>:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(propertyData$PROPDMGEXP)</code></pre>
<pre><code>##  [1] &quot;&quot;  &quot;+&quot; &quot;-&quot; &quot;0&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;8&quot; &quot;?&quot; &quot;B&quot; &quot;H&quot; &quot;K&quot; &quot;M&quot;
## [18] &quot;h&quot; &quot;m&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(propertyData$CROPDMGEXP)</code></pre>
<pre><code>## [1] &quot;&quot;  &quot;0&quot; &quot;2&quot; &quot;?&quot; &quot;B&quot; &quot;K&quot; &quot;M&quot; &quot;k&quot; &quot;m&quot;</code></pre>
<p>according to <a href="https://rstudio-pubs-static.s3.amazonaws.com/58957_37b6723ee52b455990e149edde45e5b6.html">this site</a> the factor levels above can be cleaned up by uppercasing any lowercase variables, making numbers 1-8 multipliers of ten (i.e a value of 1 multiplies the value in the corresponding DMG column by 10, just like a value of 3, or 4, or etc.), the value <code>+</code> multiply by 1 and the values <code>-</code> and <code>?</code> multiply by 0.</p>
<p>Only keep rows where <code>CROPDMG &gt; 0</code> or <code>PROPDMG &gt; 0</code></p>
<pre class="sourceCode r"><code class="sourceCode r">propertyData &lt;-<span class="st"> </span><span class="kw">filter</span>(propertyData, CROPDMG &gt;<span class="st"> </span><span class="dv">0</span> |<span class="st"> </span>PROPDMG &gt;<span class="st"> </span><span class="dv">0</span>)</code></pre>
<p>Now manually clean up <code>EVTYPE</code>s that <em>obviously</em> belong together</p>
<pre class="sourceCode r"><code class="sourceCode r">propertyData[<span class="kw">grep</span>(<span class="st">&#39;tstm.*wind|thunderstorm.*wind&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;THUNDERSTORM WIND&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;FLASH.*FLOOD&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;FLASH FLOOD&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;URBAN.*FLOOD|^FLOODING$RIVER.*FLOOD&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;FLOOD&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;HURRICANE&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;HURRICANE&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;HIGH.*WIND|^WIND$STRONG.*WIND&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;HIGH WIND&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;WILD.*FIRE&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;WILDFIRE&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;WINTER.*WEATHER|LIGHT SNOW&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;WINTER WEATHER&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;FOG&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;DENSE FOG&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;COASTAL.*FLOOD&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;COASTAL FLOOD&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;HEAVY.*SURF&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;HIGH SURF&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;HEAVY.*RAIN&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;HEAVY RAIN&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;EXCESSIVE.*SNOW&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;HEAVY SNOW&#39;</span>
propertyData[<span class="kw">grep</span>(<span class="st">&#39;EXTREME.*COLD&#39;</span>, propertyData$EVTYPE, <span class="dt">ignore.case =</span> T),]$EVTYPE &lt;-<span class="st"> &#39;EXTREME COLD&#39;</span></code></pre>
<p>Now over approximately 98% of the data have been assigned to a proper category outlined in <a href="file:///home/chris/Coursera/Reproducible%20Research/project2/repdata-peer2_doc-pd01016005curr.pdf">here</a> in section 2.1.1 &quot;Storm Data Event Table&quot;</p>
<pre class="sourceCode r"><code class="sourceCode r">evCounts &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">table</span>(propertyData$EVTYPE))
evCounts &lt;-<span class="st"> </span><span class="kw">arrange</span>(evCounts, <span class="kw">desc</span>(Freq))
<span class="kw">sum</span>(evCounts$Freq[evCounts$Freq &gt;<span class="st"> </span><span class="dv">1000</span>])</code></pre>
<pre><code>## [1] 239100</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(propertyData)</code></pre>
<pre><code>## [1] 245031</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">239100</span>/<span class="dv">245031</span></code></pre>
<pre><code>## [1] 0.9757949</code></pre>
<h2 id="results">Results</h2>
<h2 id="section"></h2>
